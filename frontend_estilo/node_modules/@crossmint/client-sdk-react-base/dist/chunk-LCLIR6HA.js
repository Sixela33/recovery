import{createContext as _,useCallback as m,useMemo as w,useRef as h,useState as j}from"react";import{createCrossmint as v}from"@crossmint/common-sdk-base";import A from"lodash.isequal";import{jsx as R}from"react/jsx-runtime";var y=_(null);function q({children:c,apiKey:C,appId:l,extensionId:x,overrideBaseUrl:f}){let[p,i]=j(0),e=h(new Proxy(v({apiKey:C,overrideBaseUrl:f,appId:l,extensionId:x}),{set(t,n,r){return n==="jwt"&&t.jwt!==r&&i(o=>o+1),n==="experimental_customAuth"&&t.experimental_customAuth!==r&&i(o=>o+1),Reflect.set(t,n,r)}})),s=m(t=>{t!==e.current.jwt&&(e.current.jwt=t,e.current.experimental_customAuth==null?e.current.experimental_customAuth={jwt:t}:e.current.experimental_customAuth.jwt=t)},[]),u=m(t=>{e.current.jwt!=(t==null?void 0:t.jwt)&&(e.current.jwt=t==null?void 0:t.jwt),A(t,e.current.experimental_customAuth)||(e.current.experimental_customAuth=t)},[]),d=w(()=>({get crossmint(){return e.current},experimental_setCustomAuth:u,experimental_customAuth:e.current.experimental_customAuth,setJwt:s}),[u,s,p]);return R(y.Provider,{value:d,children:c})}export{y as a,q as b};
