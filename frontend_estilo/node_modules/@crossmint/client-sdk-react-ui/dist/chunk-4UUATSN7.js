import{a as _t}from"./chunk-U7W3V4AV.js";import{a as $t}from"./chunk-JSNUJJQJ.js";import{b as St}from"./chunk-4KDASQO6.js";import{a as Pt}from"./chunk-LTY4MYLM.js";import{a as Bt}from"./chunk-TBD7RAFW.js";import{a as Ut,b as Lt,c as Rt}from"./chunk-O5IPDCMT.js";import{a as Q}from"./chunk-WHUNYZQD.js";import{a as et}from"./chunk-QQP4GR7V.js";import{a as v,b as Tt}from"./chunk-WK7PY5WL.js";import{a as Ft}from"./chunk-JL7YHC7D.js";import{a as Wt}from"./chunk-23YVHBPI.js";import{a as K}from"./chunk-AOBO3CEQ.js";import{a as Ot,b as Et,c as It}from"./chunk-RV2X7AFS.js";import{a as Mt}from"./chunk-UG5R7IPH.js";import{a as q}from"./chunk-NZUCXN2O.js";import{a as u}from"./chunk-DFSB3TWF.js";import{a as zt}from"./chunk-KFFPM6JM.js";import{a as kt}from"./chunk-C3JRTLQP.js";import{a as Dt}from"./chunk-UHFCB2EY.js";import{a as ot}from"./chunk-OAHZHKRR.js";import{a as tt}from"./chunk-UAFW3OWA.js";import{a as G,b as H,c as Z,d as y}from"./chunk-PXDN3KFO.js";import Po from"color";import pe from"@emotion/styled";import{useState as so}from"react";import{useState as dt}from"react";import L from"@emotion/styled";import{useContext as He}from"react";import{createContext as Le,useEffect as ut,useMemo as Zt,useRef as te,useState as $,useCallback as z}from"react";import{CrossmintAuth as Re,getCookie as Be}from"@crossmint/client-sdk-auth";import{validateApiKeyAndGetCrossmintBaseUrl as De}from"@crossmint/common-sdk-base";import{SESSION_PREFIX as Me}from"@crossmint/common-sdk-auth";import{useCrossmint as $e}from"@crossmint/client-sdk-react-base";import{createContext as Se,useCallback as Ht,useContext as Oe,useEffect as Ee,useState as Kt}from"react";import{ChildWindow as ye,PopupWindow as Ce}from"@crossmint/client-sdk-window";import{useEffect as we,useRef as ve,useState as Ae,useCallback as be}from"react";import{z as rt}from"zod";var Gt=(o,e)=>{let{crossmintAuth:t}=O(),[r,i]=Ae(null),n=ve(null);return we(()=>(n.current==null&&(n.current=new ye(window.opener||window.parent,"*",{incomingEvents:Pe})),()=>{n.current!=null&&n.current.off("authMaterialFromPopupCallback")}),[]),{createPopupAndSetupListeners:be((l,x)=>y(void 0,null,function*(){if(n.current==null)throw new Error("Child window not initialized");i(l),e(null),console.log("createPopupAndSetupListeners",l,x),console.log("oauthUrlMap",o),console.log("oauthUrlMap[provider]",o[l]);let a=new URL(o[l]);if(x!=null){let m=Array.from(a.searchParams.entries());a.search="",x&&a.searchParams.append("provider_login_hint",x),m.forEach(([c,f])=>{a.searchParams.append(c,f)})}let C=yield Ce.init(a.toString(),{awaitToLoad:!1,crossOrigin:!0,width:400,height:700}),d=m=>y(void 0,null,function*(){var c,f;yield t==null?void 0:t.handleRefreshAuthMaterial(m.oneTimeSecret),(c=n.current)==null||c.off("authMaterialFromPopupCallback"),(f=C.window)==null||f.close(),i(null)}),s=m=>{var c,f;e(m.error),(c=n.current)==null||c.off("errorFromPopupCallback"),(f=C.window)==null||f.close(),i(null)};n.current.on("authMaterialFromPopupCallback",d),n.current.on("errorFromPopupCallback",s);let g=setInterval(()=>{var m,c;(m=C.window)!=null&&m.closed&&(clearInterval(g),i(null),(c=n.current)==null||c.off("authMaterialFromPopupCallback"))},2500)}),[o,t,e]),isLoading:r!=null,activeOAuthProvider:r}},Pe={authMaterialFromPopupCallback:rt.object({oneTimeSecret:rt.string()}),errorFromPopupCallback:rt.object({error:rt.string()})};import{jsx as Ie}from"react/jsx-runtime";var Qt={google:"",twitter:""},Nt=Se(void 0);function U(){let o=Oe(Nt);if(!o)throw new Error("useOAuthFlow must be used within an OAuthFlowProvider");return o}function jt({children:o,prefetchOAuthUrls:e}){let{crossmintAuth:t,loginMethods:r}=O(),{setError:i}=v(),[n,p]=Kt(Qt),[l,x]=Kt(!0),{createPopupAndSetupListeners:a,isLoading:C,activeOAuthProvider:d}=Gt(n,i),s=Ht(()=>y(this,null,function*(){x(!0);try{let f=(r||[]).filter(h=>h in Qt).map(h=>y(this,null,function*(){let A=yield t==null?void 0:t.getOAuthUrl(h);return{[h]:A}})),w=Object.assign({},...yield Promise.all(f));p(w)}catch(c){i(c instanceof Error?c.message:"Unable to load oauth providers. Please try again later.")}finally{x(!1)}}),[r,t,i]);Ee(()=>{e&&s()},[s,e]);let m={startOAuthLogin:Ht((c,f)=>y(this,null,function*(){yield a(c,f)}),[a]),isLoading:l||C,activeOAuthProvider:d};return Ie(Nt.Provider,{value:m,children:o})}import{useEffect as ct,useMemo as Vt}from"react";import{useDynamicContext as Fe}from"@dynamic-labs/sdk-react-core";import{isEthereumWallet as We}from"@dynamic-labs/ethereum";import{isSolanaWallet as ke}from"@dynamic-labs/solana";import{EthereumWalletConnectors as qt}from"@dynamic-labs/ethereum";import{SolanaWalletConnectors as Jt}from"@dynamic-labs/solana";import Te from"bs58";import{jsx as Xt}from"react/jsx-runtime";function Ue({children:o,enabled:e,onSdkLoaded:t,onWalletConnected:r,jwt:i}){let{primaryWallet:n,sdkHasLoaded:p,removeWallet:l,handleUnlinkWallet:x}=Fe(),a=!e||p;return ct(()=>{a&&(t==null||t(a))},[a,t]),ct(()=>{i==null&&a&&n!=null&&(l(n.id),x(n.id))},[i,a,n,l,x]),ct(()=>{function C(){return y(this,null,function*(){try{if(We(n)){let d=yield n.getWalletClient(),s={type:"external-wallet",address:d.account.address,viemAccount:H(G({},d.account),{signMessage:g=>y(this,null,function*(){return yield d.signMessage({message:g.message})})})};r(s)}else if(ke(n)){let d=yield n.getSigner(),s={type:"external-wallet",address:n.address,onSignTransaction:g=>y(this,null,function*(){return yield d.signTransaction(g)})};r(s)}else throw new Error("Unsupported wallet type")}catch(d){throw console.error("Failed to get admin signer",d),new Error("Failed to get admin signer")}})}n!=null&&i!=null&&C()},[n,i,r]),o}function Yt({children:o,enabled:e=!0,apiKeyEnvironment:t,loginMethods:r=["web3"],appearance:i,onSdkLoaded:n,onWalletConnected:p}){var d,s;let{crossmintAuth:l,jwt:x}=O(),a=Vt(()=>{var g,m;return`.powered-by-dynamic { display: none !important; }
            .wallet-list__scroll-container { padding: 0px !important; }
            .wallet-list__search-container { padding-left: 0px !important; padding-right: 0px !important; }
            .dynamic-footer { display: none !important; }
            h1 { color: ${(g=i==null?void 0:i.colors)==null?void 0:g.textPrimary} !important; }
            * { color: ${(m=i==null?void 0:i.colors)==null?void 0:m.textSecondary} !important; }`},[(d=i==null?void 0:i.colors)==null?void 0:d.textPrimary,(s=i==null?void 0:i.colors)==null?void 0:s.textSecondary]),C=Vt(()=>{if(e)return r.includes("web3:evm-only")?[qt]:r.includes("web3:solana-only")?[Jt]:[qt,Jt]},[e,r]);return Xt(Pt,{apiKeyEnvironment:t,settings:{walletConnectors:C,cssOverrides:a,events:{onAuthFailure(g,m){console.error("[DynamicWalletProvider] onAuthFailure",g,m)}},handlers:{handleConnectedWallet:g=>y(this,null,function*(){var c;if(!l)return console.error("[DynamicWalletProvider] crossmintAuth is not available"),!1;let m=g.address;if(m==null)return console.error("[DynamicWalletProvider] handleConnectedWallet: address is missing"),!1;try{let w=(yield St(g))==="solana"?"solana":"evm",h=yield l.signInWithSmartWallet(m,w);if((h==null?void 0:h.challenge)==null)throw new Error("No challenge received from signInWithSmartWallet");let A=yield(c=g.connector)==null?void 0:c.proveOwnership(m,h.challenge);if(A==null)throw new Error("Failed to get signature from wallet");let k=A;if(w==="solana"){let D=Buffer.from(A,"base64");k=Te.encode(D)}let b=yield l.authenticateSmartWallet(m,w,k);if((b==null?void 0:b.oneTimeSecret)==null)throw new Error("No oneTimeSecret received from authenticateSmartWallet");return yield l.handleRefreshAuthMaterial(b.oneTimeSecret),!0}catch(f){return console.error("[DynamicWalletProvider] Error handling wallet connection:",f),!1}})}},children:Xt(Ue,{enabled:e,onSdkLoaded:n,onWalletConnected:p,jwt:x,children:o})},`${t}-${r.join(",")}`)}import{Fragment as Ge,jsx as N,jsxs as ee}from"react/jsx-runtime";var ze={crossmintAuth:void 0,login:()=>{},experimental_loginWithOAuth:()=>{},logout:()=>{},jwt:void 0,user:void 0,status:"initializing",getUser:()=>{},experimental_externalWalletSigner:void 0,loginMethods:[]},mt=Le(ze);function dr({children:o,appearance:e,termsOfServiceText:t,prefetchOAuthUrls:r=!0,authModalTitle:i,onLoginSuccess:n,loginMethods:p=["email","google"],refreshRoute:l,logoutRoute:x}){let{crossmint:a}=$e("CrossmintAuthProvider must be used within CrossmintProvider"),[C,d]=$(void 0),[s,g]=$(void 0),m=De(a.apiKey),[c,f]=$(!1),[w,h]=$(!1),[A,k]=$(void 0),[b,D]=$(!0),M=p.some(P=>P.startsWith("web3")),[Ct,he]=$(void 0),at=te(null),_=Zt(()=>(at.current||(at.current=Re.from(a,{callbacks:{onLogout:()=>{d(void 0),g(void 0)},onTokenRefresh:P=>{d(P.user),g(P.jwt)}},refreshRoute:l,logoutRoute:x})),at.current),[]),V=te(null),lt=z(()=>{n==null||n()},[n]);ut(()=>{if(s==null){let P=Be(Me);g(P)}h(!0)},[s]),ut(()=>{s!=null&&c&&(f(!1),lt())},[s,c,lt]);let wt=z(P=>{if(s!=null){console.log("User already logged in");return}P!=null&&typeof P=="string"&&k(P),f(!0)},[s]),vt=z(()=>{_.logout()},[_]),st=z(()=>!w||M&&!b?"initializing":s!=null?"logged-in":c?"in-progress":"logged-out",[w,M,b,s,c]),At=z(()=>y(this,null,function*(){if(s==null){console.log("User not logged in");return}let P=yield _.getUser();return d(P),P}),[s,_]),bt=z(P=>y(this,null,function*(){var Y;yield(Y=V.current)==null?void 0:Y.call(V,P)}),[V]),xe=Zt(()=>({crossmintAuth:_,login:wt,experimental_loginWithOAuth:bt,logout:vt,jwt:s,user:C,status:st(),getUser:At,loginMethods:p,experimental_externalWalletSigner:Ct}),[_,wt,bt,vt,s,C,st,At,p,Ct]);return N(mt.Provider,{value:xe,children:N(Tt,{setDialogOpen:(P,Y)=>{f(P),Y&&lt()},initialState:{appearance:e,loginMethods:p,termsOfServiceText:t,authModalTitle:i,baseUrl:m,defaultEmail:A},children:N(jt,{prefetchOAuthUrls:st()==="logged-out"&&r,children:N(_e,{loginWithOAuthRef:V,children:M?ee(Yt,{apiKeyEnvironment:a.apiKey.includes("production")?"production":"staging",loginMethods:p,appearance:e,onSdkLoaded:D,onWalletConnected:he,children:[o,N(nt,{open:c})]}):ee(Ge,{children:[o,N(nt,{open:c})]})})})})})}function _e({children:o,loginWithOAuthRef:e}){let{startOAuthLogin:t}=U(),{jwt:r}=O(),i=z(n=>y(this,null,function*(){if(r!=null){console.log("User already logged in");return}yield t(n)}),[r,t]);return ut(()=>{e.current=i},[i,e]),o}var O=()=>{let o=He(mt);if(!o)throw new Error("useCrossmintAuth must be used within CrossmintAuthProvider");return o};import{jsx as S,jsxs as J}from"react/jsx-runtime";var Ke=L.div`
    display: flex;
    flex-direction: column;
`,Qe=L.div`
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    width: 100%;
`,Ne=L.div`
    position: relative;
    left: 12px;
`,je=L.p`
    font-size: 16px;
    font-weight: 400;
    margin: 16px 0 4px 0;
    text-align: center;
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.textPrimary)||u["cm-text-primary"]}};
`,Ve=L.p`
    text-align: center;
    padding: 0 16px;
    margin: 0;
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.textSecondary)||u["cm-text-secondary"]}};
    font-size: 14px;
    line-height: 1.4;
`,qe=L.div`
    padding: 32px 0;
`,j=L(Rt)`
    @media (max-width: 379px) {
        width: 40px;
        height: 56px;
        font-size: 28px;
        margin: 0;
    }
`,Je=L.div`
    font-size: 12px;
    line-height: 1.3;
    text-align: center;
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.textSecondary)||u["cm-text-secondary"]}};
`;function oe({otpEmailData:o,setOtpEmailData:e}){var f,w,h,A,k;let{crossmintAuth:t}=O(),{appearance:r,setDialogOpen:i,setStep:n,setError:p}=v(),[l,x]=dt(""),[a,C]=dt(!1),[d,s]=dt(!1),g=()=>y(this,null,function*(){var b,D;s(!0);try{let M=yield t==null?void 0:t.confirmEmailOtp((b=o==null?void 0:o.email)!=null?b:"",(D=o==null?void 0:o.emailId)!=null?D:"",l);yield t==null?void 0:t.handleRefreshAuthMaterial(M),i(!1,!0),n("initial")}catch(M){console.error("Error confirming email OTP",M),p("Invalid code. Please try again."),C(!0)}finally{s(!1)}}),m=()=>y(this,null,function*(){var b;try{yield t==null?void 0:t.sendEmailOtp((b=o==null?void 0:o.email)!=null?b:"")}catch(D){p("Failed to resend code. Please try again.")}});return J(Ke,{children:[S(et,{onClick:()=>{n("initial"),e(null)},iconColor:(f=r==null?void 0:r.colors)==null?void 0:f.textPrimary,ringColor:(w=r==null?void 0:r.colors)==null?void 0:w.accent}),J(Qe,{children:[S(Ne,{children:S(kt,{customAccentColor:(h=r==null?void 0:r.colors)==null?void 0:h.accent,customButtonBackgroundColor:(A=r==null?void 0:r.colors)==null?void 0:A.buttonBackground,customBackgroundColor:(k=r==null?void 0:r.colors)==null?void 0:k.background})}),S(je,{appearance:r,children:"Check your email"}),J(Ve,{appearance:r,children:["A temporary login code has been sent to",S("br",{}),o!=null&&o.email?S("strong",{children:o.email}):"your email address"]}),S(qe,{children:S(Ut,{maxLength:6,value:l,onChange:b=>{x(b),C(!1),p(null)},onComplete:g,disabled:d,appearance:r,children:J(Lt,{children:[S(j,{index:0,hasError:a}),S(j,{index:1,hasError:a}),S(j,{index:2,hasError:a}),S(j,{index:3,hasError:a}),S(j,{index:4,hasError:a}),S(j,{index:5,hasError:a})]})})}),J(Je,{appearance:r,children:["Can't find the email? Check spam folder.",S("br",{}),"Some emails may take several minutes to arrive."]}),S(Ft,{initialSeconds:60,appearance:r,countdownText:b=>`Re-send code in ${b}s`,countdownCompleteText:"Re-send code",handleOnClick:m})]})]})}import{useState as gt}from"react";import ie from"color";import R from"@emotion/styled";import{isEmailValid as ft}from"@crossmint/common-sdk-auth";import re from"@emotion/styled";import{jsx as pt,jsxs as Ze}from"react/jsx-runtime";var Xe=re.button`
    ${q}
    
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    height: 32px;
    padding: 0 10px;
    border: 1px solid ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.border)||u["cm-border"]}};
    border-radius: ${o=>{var e;return((e=o.appearance)==null?void 0:e.borderRadius)||"12px"}};
    background-color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.buttonBackground)||u["cm-background-primary"]}};
    cursor: ${o=>o.isLoading?"not-allowed":"pointer"};
    
    /* Hover and focus states */
    &:hover {
        background-color: ${o=>o.isLoading?u["cm-muted-primary"]:u["cm-hover"]};
    }
    
    &:focus {
        outline: none;
        background-color: theme["cm-hover"];
    }
`,Ye=re.span`
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.accent)||u["cm-accent"]}};
    font-size: 14px;
    font-weight: 400;
`;function ne({emailInput:o,appearance:e}){var n,p;let{startOAuthLogin:t,activeOAuthProvider:r}=U(),i=r==="google";return Ze(Xe,{type:"button",appearance:e,isLoading:i,onClick:i?void 0:()=>t("google",o.trim().toLowerCase()),children:[pt(ot,{style:{height:"18px",width:"18px"}}),i?pt(K,{style:{color:(n=e==null?void 0:e.colors)==null?void 0:n.textSecondary,fill:(p=e==null?void 0:e.colors)==null?void 0:p.textPrimary,width:"18px",height:"18px"}}):pt(Ye,{appearance:e,children:"Continue"})]})}import{jsx as T,jsxs as ht}from"react/jsx-runtime";var to=R.div`
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: flex-start;
    width: 100%;
    border-radius: 8px;
`,eo=R.div`
    width: 100%;
`,oo=R.label`
    display: block;
    margin-bottom: 5px;
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.textPrimary)||u["cm-text-primary"]}};
    font-size: 14px;
    font-weight: 400;
`,ro=R.form`
    position: relative;
`,no=R.input`
    ${q}
    
    /* Base input styles */
    display: flex;
    flex-grow: 1;
    text-align: left;
    padding-left: 16px;
    padding-right: ${o=>o.showGoogleButton?"132px":"80px"};
    height: 58px;
    width: 100%;
    border: 1px solid;
    border-color: ${o=>{var e,t,r,i;return o.hasError?((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.danger)||u["cm-danger"]:((i=(r=o.appearance)==null?void 0:r.colors)==null?void 0:i.border)||u["cm-border"]}};
    border-radius: ${o=>{var e;return((e=o.appearance)==null?void 0:e.borderRadius)||"12px"}};
    background-color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.inputBackground)||u["cm-background-primary"]}};
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.textPrimary)||u["cm-text-primary"]}};
    font-size: 16px;
    transition: border-color 200ms ease-in-out, box-shadow 200ms ease-in-out;
    
    &::placeholder {
        font-weight: 400;
        color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.textSecondary)||u["cm-text-secondary"]}};
    }
    
    &:focus {
        outline: none;
        box-shadow: 0 0 0 2px ${o=>{var e,t;return new ie(((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.accent)||u["cm-accent"]).alpha(.18).toString()}};
    }
    
    &:read-only {
        cursor: not-allowed;
        opacity: 0.7;
    }
`,io=R.div`
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    display: flex;
    align-items: center;
    padding-right: 16px;
    aspect-ratio: 1/1;
`,ao=R.button`
    ${q}
    
    font-weight: 500;
    white-space: nowrap;
    background-color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.inputBackground)||u["cm-background-primary"]}};
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.accent)||u["cm-accent"]}};
    cursor: ${o=>o.disabled?"not-allowed":"pointer"};
    opacity: ${o=>o.disabled?.6:1};
    border: none;
    padding: 8px 12px;
    border-radius: 6px;
    transition: opacity 200ms ease;
    
    &:hover:not(:disabled) {
        opacity: 0.8;
    }
    
    &:focus-visible {
        outline: 2px solid ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.accent)||u["cm-accent"]}};
        outline-offset: 2px;
    }

    &:not(:disabled):focus-visible {
        box-shadow: 0 0 0 2px ${o=>{var e,t;return new ie(((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.accent)||u["cm-accent"]).alpha(.18).toString()}};
    }
`,lo=R.p`
    font-size: 12px;
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.danger)||u["cm-danger"]}};
    margin: 8px 0 8px 0;
`;function ae({setOtpEmailData:o}){var c,f,w;let{crossmintAuth:e}=O(),{appearance:t,defaultEmail:r,setStep:i,setError:n,loginMethods:p}=v(),[l,x]=gt(r!=null?r:""),[a,C]=gt(""),[d,s]=gt(!1),g=l.toLowerCase().includes("@gmail.com")&&!l.toLowerCase().includes("+")&&ft(l)&&!d&&p.includes("google");function m(h){return y(this,null,function*(){h.preventDefault(),s(!0);try{let A=l.trim().toLowerCase(),k=yield e==null?void 0:e.sendEmailOtp(A);o({email:A,emailId:k.emailId}),i("otp")}catch(A){s(!1),n("Failed to send email. Please try again or contact support.")}})}return T(to,{children:ht(eo,{children:[T(oo,{appearance:t,children:"Email"}),ht(ro,{role:"form",onSubmit:h=>{if(g){h.preventDefault();return}ft(l)?m(h):h.preventDefault()},noValidate:!0,children:[T(Wt,{children:"Email"}),T(no,{id:"emailInput",appearance:t,hasError:!!a,showGoogleButton:g,type:"email",placeholder:"your@email.com",value:l,onChange:h=>{x(h.target.value),C(""),n(null)},readOnly:d,"aria-describedby":"emailError"}),ht(io,{children:[a&&T(tt,{customColor:(c=t==null?void 0:t.colors)==null?void 0:c.danger}),d&&T(K,{style:{color:(f=t==null?void 0:t.colors)==null?void 0:f.textSecondary,fill:(w=t==null?void 0:t.colors)==null?void 0:w.textPrimary}}),g?T(ne,{emailInput:l,appearance:t}):!a&&!d?T(ao,{type:"submit",appearance:t,disabled:!ft(l)||d,children:"Submit"}):null]})]}),a&&T(lo,{appearance:t,id:"emailError",children:a})]})})}import{jsx as le}from"react/jsx-runtime";function se(){let{step:o}=v(),[e,t]=so(null);return o==="otp"?le(oe,{otpEmailData:e,setOtpEmailData:t}):o==="initial"?le(ae,{setOtpEmailData:t}):null}import{jsx as xt}from"react/jsx-runtime";function ce(e){var o=Z(e,[]);var l;let{step:t,appearance:r}=v(),{startOAuthLogin:i,activeOAuthProvider:n}=U(),p=n==="google";return t!=="initial"?null:xt(Q,H(G({icon:xt(ot,{style:{height:"25px",width:"25px"}}),isLoading:p,appearance:r,onButtonClick:()=>i("google")},o),{children:xt("span",{style:{color:(l=r==null?void 0:r.colors)==null?void 0:l.textPrimary},children:"Sign in with Google"})}))}import{useEffect as yt,useMemo as co,useState as uo}from"react";import{useSignIn as mo,QRCode as po}from"@farcaster/auth-kit";import B from"@emotion/styled";import{Fragment as bo,jsx as W,jsxs as it}from"react/jsx-runtime";var go=B.div`
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
`,fo=B.div`
    text-align: center;
`,ho=B.h3`
    font-size: 18px;
    font-weight: 600;
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.textPrimary)||u["cm-text-primary"]}};
    margin: 0 0 8px 0;
`,xo=B.p`
    font-size: 16px;
    font-weight: 400;
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.textSecondary)||u["cm-text-secondary"]}};
    margin: 0;
`,yo=B.div`
    background-color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.inputBackground)||u["cm-background-primary"]}};
    aspect-ratio: 1;
    border-radius: ${o=>{var e;return((e=o.appearance)==null?void 0:e.borderRadius)||"8px"}};
    padding: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
`,Co=B.div`
    min-height: 246px;
    display: flex;
    align-items: center;
    justify-content: center;
`,wo=B.p`
    font-size: 16px;
    text-align: center;
    font-weight: 400;
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.textSecondary)||u["cm-text-secondary"]}};
    margin: 0;
`,vo=B.a`
    font-size: 16px;
    font-weight: 400;
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.textLink)||u["cm-accent"]}};
    text-decoration: none;
    
    &:hover {
        text-decoration: underline;
    }
`;function ue(){let{step:o,appearance:e,setStep:t,setError:r}=v();return o==="initial"?W(Q,{icon:W(Dt,{style:{height:"25px",width:"25px"}}),appearance:e,onButtonClick:()=>{t("qrCode"),r(null)},children:"Sign in with Farcaster"}):o==="qrCode"?W(Ao,{}):null}function Ao(){var m,c,f,w;let{crossmintAuth:o}=O(),{appearance:e,setStep:t,setDialogOpen:r,setError:i}=v(),[n,p]=uo(null),l=co(()=>({onSuccess:h=>{p(h)}}),[]),{signIn:x,url:a,connect:C,signOut:d,isConnected:s}=mo(l),g=h=>y(this,null,function*(){i(null);try{let A=yield o==null?void 0:o.signInWithFarcaster(h);yield o==null?void 0:o.handleRefreshAuthMaterial(A),r(!1),t("initial")}catch(A){console.error("Error during Farcaster sign-in:",A),i("Failed to sign in with Farcaster")}});return yt(()=>{n!=null&&g(n)},[n]),yt(()=>{s&&x()},[s]),yt(()=>{C()},[]),it("div",{children:[W(et,{onClick:()=>{d(),t("initial")},iconColor:(m=e==null?void 0:e.colors)==null?void 0:m.textPrimary,ringColor:(c=e==null?void 0:e.colors)==null?void 0:c.accent}),it(go,{children:[it(fo,{children:[W(ho,{appearance:e,children:"Sign in with Farcaster"}),W(xo,{appearance:e,children:"Scan with your phone's camera to continue."})]}),W(yo,{appearance:e,children:a!=null?W(po,{uri:a,size:280}):W(Co,{children:W(K,{style:{color:(f=e==null?void 0:e.colors)==null?void 0:f.textSecondary,fill:(w=e==null?void 0:e.colors)==null?void 0:w.textPrimary}})})}),a?it(bo,{children:[W(wo,{appearance:e,children:"Alternatively, click on this link to open Warpcast."}),W(vo,{href:a,rel:"noopener noreferrer",target:"_blank",appearance:e,children:"Open Warpcast"})]}):W("div",{style:{height:"66px"}})]})]})}import{jsx as me}from"react/jsx-runtime";function de(e){var o=Z(e,[]);let{step:t,appearance:r}=v(),{startOAuthLogin:i,activeOAuthProvider:n}=U(),p=n==="twitter";return t!=="initial"?null:me(Q,H(G({icon:me(zt,{style:{height:"22px",width:"22px"}}),isLoading:p,appearance:r,onButtonClick:()=>i("twitter")},o),{children:"Sign in with X"}))}import{jsx as E,jsxs as X}from"react/jsx-runtime";var So=pe.div`
    position: relative;
    padding: 40px 24px 30px 24px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    -webkit-font-smoothing: antialiased;
    animation: none;
    
    @media (min-width: 480px) {
        padding: 40px 40px 30px 40px;
    }
`,Oo=pe.div`
    display: flex;
    align-items: flex-start;
    justify-content: flex-start;
    border-radius: 8px;
    padding: 8px;
    gap: 8px;
    margin-top: 34px;
    background-color: ${o=>{var e,t,r;return new Po((r=(t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.danger)!=null?r:u["cm-danger"]).alpha(.12).toString()}};
`;function ge({style:o}){var x,a,C,d,s,g,m,c,f,w;let{step:e,appearance:t,loginMethods:r,baseUrl:i,error:n,termsOfServiceText:p,authModalTitle:l}=v();return X(So,{style:o,children:[n!=null?X(Oo,{appearance:t,children:[E("div",{style:{minWidth:"20px"},children:E(tt,{customColor:(a=(x=t==null?void 0:t.colors)==null?void 0:x.danger)!=null?a:u["cm-danger"]})}),E("p",{style:{fontSize:"14px",margin:0,color:(d=(C=t==null?void 0:t.colors)==null?void 0:C.danger)!=null?d:u["cm-danger"]},children:n})]}):null,e==="initial"?X("div",{children:[E(Et,{appearance:t,children:l!=null?l:"Sign in to Crossmint"}),E(It,{appearance:t,children:"Access using one of the options below."})]}):null,r.includes("google")?E(ce,{}):null,r.includes("farcaster")?E($t,{baseUrl:i,children:E(ue,{})}):null,r.includes("twitter")?E(de,{}):null,r.some(h=>h.startsWith("web3"))?E(_t,{}):null,r.includes("email")?X("div",{children:[r.length>1?E(Bt,{appearance:t,text:"OR"}):null,E(se,{})]}):null,e==="initial"&&p!=null?X("div",{style:{fontSize:"0.875rem",textAlign:"center",marginTop:"0.5rem",color:(g=(s=t==null?void 0:t.colors)==null?void 0:s.textSecondary)!=null?g:u["cm-text-secondary"]},children:[E("style",{children:`
                        p a {
                            color: ${(c=(m=t==null?void 0:t.colors)==null?void 0:m.textLink)!=null?c:u["cm-link"]};
                        }
                    `}),p]}):null,e==="initial"||e==="otp"?E(Mt,{style:{marginTop:"1rem",justifyContent:"center"},color:(w=(f=t==null?void 0:t.colors)==null?void 0:f.textSecondary)!=null?w:u["cm-text-secondary"]}):null]})}import{jsx as fe}from"react/jsx-runtime";function nt({open:o}){let{appearance:e,setDialogOpen:t}=v();return fe(Ot,{open:o,setDialogOpen:t,appearance:e,children:fe(ge,{style:{maxWidth:"448px",padding:"0px"}})})}export{nt as a,Gt as b,U as c,jt as d,Yt as e,mt as f,dr as g,O as h,oe as i,ne as j,ae as k,se as l,ce as m,ue as n,de as o,ge as p};
